# 理髮店預約系統規格書 (Barbershop Appointment System Specification)

## 1. 專案概述
本專案為理髮店預約系統，旨在管理預約、設計師排程及顧客關係 (CRM)。系統將與 Line 平台整合，提供使用者互動與通知功能。

## 2. 技術堆疊
- **前端**: Vue 3
- **後端**: Java Spring Boot
- **資料庫**: (待定 - 例如 MySQL/PostgreSQL)
- **整合**: Line Platform (LIFF Web App / Messaging API)

## 3. 功能需求

### 3.1. 服務項目
系統支援多種服務項目，每項服務包含：
- **名稱**: 如 剪+洗、染髮。
- **時長**: 固定時長 (如 1 小時, 2 小時)。
- **價格**: 服務價格。
- **價格備註**: 可標記為「起」(以上)，適用於價格浮動的項目 (如染髮、燙髮)。

### 3.2. 預約規則
- **營業時間**: 11:00 - 21:00。
- **預約開放時間**: 每月 **15號** 開放預約 *下個月* 的時段。
- **可用性**: 基於設計師的工作時間及現有預約狀況。
- **同時段限制**: 每位設計師同一時間僅能服務一位顧客。
- **取消/修改**: 顧客可隨時取消或修改預約（無時間限制）。
- **付款方式**: 到店付款（無需訂金）。

### 3.3. 指定設計師
- 顧客可以瀏覽設計師列表。
- 顧客可以指定特定設計師進行服務。

### 3.4. 通知 (Line 整合)
系統透過 Line 發送自動通知：
- **預約成功**: 預約後立即發送確認通知。
- **即將到來提醒**: 預約時間前 24 小時發送。

### 3.5. 預約管理 (顧客端)
- 顧客可查詢自己的預約紀錄。
- 顧客可查看即將到來的預約。

### 3.6. 視覺化排班表 (管理員後台)
- 行事曆/時間軸視圖呈現排班狀況。
- **詳細資訊檢視**: 點擊行事曆上的預約項目，彈出視窗顯示詳細資訊，包含：
    - 顧客姓名 (真實姓名或 Line 暱稱)
    - 顧客手機號碼
    - 服務項目
    - 預約時間 (開始與結束)
- *目標對象*: 主要供員工/管理員管理店內量能。

### 3.7. 設計師班表設定
- **排班設定**: 設定工作日及時間。
- **休假管理**: 設定個別設計師的休假日期。

### 3.8. 顧客管理 (CRM)
- **註冊流程**: 
    - 首次登入時強制填寫個人資料。
    - **必填欄位**: 真實姓名、手機號碼。
    - **驗證規則**: 手機號碼須符合台灣格式 (`09xxxxxxxx`)。
- **顧客資料**: 連結 Line 帳號的基本資訊。
- **服務紀錄**: 過去的服務紀錄。
- **髮質檔案**:
    - 消費習慣。
    - 髮質特性。
    - 照片（服務前後對比照或參考圖）。

### 3.9. 多語言支援 (i18n)
- **預設語言**: 繁體中文 (zh-TW)。
- **支援語言**: 繁體中文 (zh-TW)、英文 (en)。
- **切換機制**: 應用程式介面提供全域語言切換按鈕（如右上角），支援即時切換。
- **涵蓋範圍**: 包含所有顧客端頁面（首頁、預約流程、我的預約）及管理員後台介面。

### 3.10. 服務項目管理 (管理員後台)
- **列表檢視**: 顯示所有服務項目、價格 (含「起」標記)、所需時間。
- **新增/編輯/刪除**: 管理員可維護服務項目資訊。

## 4. 資料模型 (初步)

### 實體 (Entities)
- **User/Customer (使用者/顧客)**: ID, LineID, Name, Phone.
- **Stylist (設計師)**: ID, Name, Specialty.
- **Service (服務)**: ID, Name, Duration, Price, IsPriceStartingFrom.
- **Appointment (預約)**: ID, CustomerID, StylistID, ServiceID, DateTime, Status (Booked, Completed, Cancelled, No-show).
- **Schedule/Availability (排班/可用性)**: StylistID, Date, IsWorking, LeaveType.
- **CRMRecord (CRM紀錄)**: CustomerID, Notes, Photos, Date.
